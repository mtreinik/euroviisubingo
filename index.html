<html lang="fi">
<head>
    <title>Euroviisubingo</title>
    <style>
        body {
            padding: 2em 2em 2em 2em;
            font-family: "Gill Sans", sans-serif;
        }

        button {
            font-family: inherit;
            font-size: 1em;
        }

        .form-group {
            margin-top: 1em;
        }

        .bingo-table {
            margin: 2em;
        }
        .about {
            margin-top: 1em;
            font-size: x-small;
            text-align: center;
        }

        .print-and-clear {
            display: none;
            margin-left: 5em;
        }
        .bingo-table td {
            border: solid 1px;
            padding: 0.5em;
        }

        @media print {
            .bingo-table {
                page-break-after: always;
            }

            .non-printing {
                display: none;
            }
        }
    </style>
</head>
<body>
<div class="non-printing">
    <form onsubmit="return false">
        <h1>Euroviisubingo</h1>
        <div class="form-group">
            <label for="items">Bingoruudut</label>
            <br/>
            <textarea cols="70" id="items" rows="5">
"creepy hymy",
"lavaste ja vaate sulautuvat toisiinsa",
"sielunkurotus",
"lavalla valtava rumpu",
"kuhertelua",
"modulaatio",
"lieskoja",
"ilotulituksia",
"Suomen lippu",
"tuulikone",
"niukka vaatetus",
"laulamista silmät kiinni",
"laulajalla soitin",
"suudelma",
"sixpack",
"aivan liian korkea/matala lauluääni",
"juontajien väkinäistä vitsailua",
"huonosti peitetty poliittinen kannanotto",
"tanssijatyttöjä/-poikia",
"tanssijat nostavat laulajan ilmaan",
"Mieslaulaja riisuu takin. Alla on hihaton paita.",
"Naislaulaja riisuu pitkän mekon tai takin. Alla on minihame.",
"Laulaja iskee silmää kameralle",
"Valtava laahus",
"Esiintyjät jonossa, takana olevista näkyy huitovat kädet",
"esiintyjä on paljain jaloin",
"miestanssijalla on takki tai liivi ilman paitaa",
"laulaja soittaa pari säveltä ja unohtaa sitten instrumentin",
"Laulajalla niin lyhyt hame, että se vaikuttaa paidalta.",
"Takahuoneessa häviäjä yrittää hymyillä reippaasti.",
"Laulajan kaula-aukko ulottuu napaan asti",
"laulajalla on rooliasu (esim. ammatti tai satuhahmo)",
"mies laulaa säkeistöt, nainen laulaa kertsit",
"artisti on alle 18-vuotias, ja se mainitaan erikseen juonnossa",
"lentosuukko",
"pisteiden antaja jää juttelemaan liian pitkään juontajan kanssa",
"suomenkielisessä tekstityksessä on kökköjä käännöksiä",
"juontaja kertoo, että artisti on itse suunnitellut pukunsa",
"tanssijat tulevat laulajan luokse ja tämä tönäisee heidät pois",
"naislaulajalla on siivet",
"omankielinen säkeistö, englannikielinen kertsi",
"mieleenjäävät sukkahousut",
"scifi-teemaa",
"vähemmistöjen oikeudet esillä",
"laulun sanoissa mainitaan sana 'Eurooppa'",
"erikoinen instrumentti",
"vaate joka estää liikkumisen",
"tanssijoilla käsittämätön koreografia",
"mummoja tai muita eläkeikäisiä lavalla",
"joku sanoo illan olevan 'amazing' tai 'wonderful'",
"aikaisempi euroviisuvoittaja jakaa pisteitä",
"seksistinen vitsi",
"hyppy tai loikka",
"maa antaa parhaat pisteet naapurimaalleen",
"laulun tempo vaihtuu yhtäkkiä",
"laulaja liikuttuu ainakin lähes kyyneliin",
"kansallispuku tai jotain sinnepäin",
"juontaja vaihtaa vaatteita",
"epävireistä laulua",
"huonoa englantia",
"esitys aiheuttaa syvää myötähäpeää",
"isänmaallisuutta korostava esitys",
"seksiä tihkuva esitys",
"laulu aiheuttaa korvamadon",
"laulu jää lavashown varjoon",
"maailma pelastuu / pelastakaa maailma",
"yritys nostattaa yleisöä",
"valoshow aiheuttaa epilepsiavaaran",
"savukone",
"näyttävä kitarasoolo",
"putoava videolattia",
"tanssija käpälöi laulajaa",
"laulajo on entinen lapsitähti",
"merkittävän leveä haara-asento",
"laulaja on edustanut maataan euroviisuissa ennenkin",
"kotikatsomo on yhä hereillä, kun sanotaan 'start voting now'",
"söpö koira, pehmolelu tai pikkueläin",
"erittäin erikoiset kengät",
"laulussa käytetään kaikille tuntematonta kieltä",
"juontajat puhuvat kuorossa",
"kappaleessa on kansanmusiikin piirteitä",
"lavalla viulu",
"lyriikoissa mainitaan lintu tai lentäminen",
"artisti on itse tehnyt kappaleensa",
"kroppa paikallaan, kädet tanssivat",
"tekstiä lavalla",
"juontaja laulaa",
"biisi jää lavashown varjoon",
"räppiä tai puhetta kesken laulun",
"täysin käsittämätön lyriikka",
"käsittämätön suomennos",
"nielurisat näkyvät",
"artisti laulaa polvillaan",
"puhutaan tai lauletaan unelmista",
"nähdään taivaankappale",
"ammutaan leikisti",
"naisen käsivarret ja jalat kokonaan piilossa",
"viuhahdus tai moka",
"lavashowssa näkyy vettä"
                </textarea>
        </div>
        <div class="form-group">
            <label for="numberOfTables">Lisättävien bingoruudukoiden määrä</label>
            <br/>
            <input id="numberOfTables" size="3" type="text" value="5"/>
        </div>
        <div class="form-group">
            <button onclick="createBingo()">Tee bingoruudukoita</button>
            <span id="print-and-clear" class="print-and-clear">
                <button onclick="print()">Tulosta</button>
                <button onclick="clearBingo()">Tyhjennä</button>
            </span>
        </div>
    </form>
</div>
<h2 class="non-printing" id="counter"></h2>
<div id="bingo"></div>

<script>
  function getTitle(count) {
    if (count === 0) {
      return ''
    }
    if (count === 1) {
      return '1 bingoruudukko'
    }
    return count + ' bingoruudukkoa'
  }

  function updateUi() {
    const bingoTableCount = document.getElementById("bingo").childElementCount
    document.getElementById("counter").innerText = getTitle(bingoTableCount)
    document.getElementById("print-and-clear").style.display =
      bingoTableCount > 0 ? 'inline' : 'none'
  }

  function getRandomItem(items) {
    const index = Math.floor(Math.random() * items.length)
    if (items.length > 0) {
      const item = items[index]
      items = items.splice(index, 1)
      return item
    }
    return ''
  }

  function getBingoTable(items) {
    const div = document.createElement("div")
    div.className = 'bingo-table'
    const table = document.createElement("table")
    div.append(table)

    for (let y = 0; y < 5; y++) {
      const tr = document.createElement("tr")
      for (let x = 0; x < 5; x++) {
        const td = document.createElement("td")
        td.append(document.createTextNode(getRandomItem(items)))
        tr.append(td)
      }
      table.append(tr)
    }
    const about = document.createElement("div")
    about.append(document.createTextNode("mikkoreinikainen.fi/euroviisubingo"))
    about.className = 'about'
    div.append(about)
    return div
  }

  function createBingo() {
    console.log('createBingo')
    const items = document.getElementById("items").value.split('",').map((s) => s.replace(/"/g, ''))
    const numberOfTables = document.getElementById("numberOfTables").value
    for (let i = 0; i < numberOfTables; i++) {
      const table = getBingoTable(items.slice())
      document.getElementById("bingo").appendChild(table)
    }
    updateUi()
  }

  function clearBingo() {
    document.getElementById("bingo").innerHTML = ''
    updateUi()
  }
</script>
</body>
</html>